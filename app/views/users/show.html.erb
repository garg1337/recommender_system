<% provide(:title, @user.name)%>

<style type = "text/css">
	table{
		table-layout: fixed;
	}



</style>

<div class = "row">
	<aside class = "span4">
		<section>
			<h1>
				<%= gravatar_for @user %>
				<%= @user.name %>
			</h1>
		</section>
	</aside>
</div>

<br>
<br>

	<table class = "table table-bordered">
		<caption><h4> Games Rated (<%= @game_ratings.length %>)</h4></caption>
		<tr> <th>Game Title</th> <th>Rating</th> </tr>
		<% for @game_rating in @game_ratings %>
			<tr>
				<td><%= link_to Game.find(@game_rating.game_id).title, Game.find(@game_rating.game_id)%></td>
				<td> <%= "#{@game_rating.rating}/10" %> </td>
			</tr>
		<% end %>
	</table>	




<% if @user.name == @current_user.name &&  !@gen_recs %>

	<center>
		<%= link_to "Generate Reccomendations", user_path(:gen_recs => true), class: "btn btn-large btn-primary" %>
	</center>

<% else %>
	<table class = "table table-bordered">
		<caption><h4> Your Recommendations</h4></caption>
		<caption><h6> (If your recommendations seem misleading, try rating more games. 
					  The system gets more accurate the more games you rate.)
		</h6></caption>
		<tr> <th>You might enjoy...</th> <th>Users similar to you also liked...</th> </tr>
		<% @user_likes = @user.score_games %>
		<% @sim_scores = @user.sim_score_games %>
		<% @i = 0 %>
		<% for @user_like in @user_likes %>
			<tr>
				<td><%= link_to Game.find(@user_like[0]).title, Game.find(@user_like[0])%></td>
				<% if @i < @sim_scores.length %>
										<%@sim_score = @sim_scores[@i]  %>
															<td><%= link_to Game.find(@sim_score[0]).title, Game.find(@sim_score[0])%></td>
															<% @i = @i + 1 %>
				<% else %>
					<td></td>
				<% end %>
			</tr>
		<% end %>
	</table>	
<% end %>
	







